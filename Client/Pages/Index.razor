@page "/"
@using BlazorApp.Shared
@inject HttpClient Http

<MudThemeProvider />

<MudLayout>
    <MudAppBar Elevation="1">
        <MudText Typo="Typo.h5" Class="ml-3">Child Timetable</MudText>
        <MudAppBarSpacer />
        <MudIconButton Icon="@Icons.Custom.Brands.GitHub" Color="Color.Default" Edge="Edge.End" Link="https://github.com/MrSimonC" />
    </MudAppBar>
    <MudMainContent>
        <MudPaper>
            <MudContainer MaxWidth="MaxWidth.Small"></MudContainer>
        </MudPaper>
        <MudGrid>
            @foreach (var item in Items)
            {
                <MudItem xs="3">
                    <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">@item.Time</MudPaper>
                </MudItem>
                <MudItem xs="9">
                    <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">@item.Description</MudPaper>
                </MudItem>
            }
        </MudGrid>
    </MudMainContent>
</MudLayout>

@code {
    private List<TimetableItem> Items = new List<TimetableItem>();

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Items = await Http.GetFromJsonAsync<List<TimetableItem>>("/api/PlayIdeas");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }

        //Items = new List<TimetableItem>{
        //    new TimetableItem { Time = "9am", Description = "Breakfast" },
        //    new TimetableItem { Time = "10am", Description = "Building Blocks" },
        //    new TimetableItem { Time = "11am", Description = "Walk outside" }
    }
}
